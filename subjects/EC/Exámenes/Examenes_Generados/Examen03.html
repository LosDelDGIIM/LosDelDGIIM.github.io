<!DOCTYPE html>
<html lang="es">
<head>
    <title>LosDelDGIIM | Test</title>
    <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
    <meta charset="UTF-8">

    <link rel="icon" href="../../../../assets/Icon.png">

    
    
    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
            integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
            crossorigin="anonymous"></script>
    <script type="text/javascript" async
            src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML">
    </script>
          
</head>
<body>

<div class="container">
    <div class="form-row">
        <div class="container">
            <p><br></p>
<h1>Estructura de Computadores. Examen 03.</h1>
<p><strong>Autor:</strong> Arturo Olivares Martos</p>
<hr>
<ul>
<li><strong>Asignatura:</strong> Estructura de Computadores.</li>
<li><strong>Curso Acad칠mico:</strong> 2023-24.</li>
<li><strong>Grado:</strong> Doble Grado en Ingenier칤a Inform치tica y Matem치ticas.</li>
<li><strong>Grupo:</strong> A.</li>
<li><strong>Profesor:</strong> Ignacio Rojas Ruiz.</li>
<li><strong>Fecha:</strong> 20-11-2023.</li>
<li><strong>Descripci칩n:</strong> Repetici칩n del examen de Temas 1 y 2 de Teor칤a, y pr치cticas 1-3.</li>
</ul>
<p>El primer parcial se invalid칩 y se repeti칩 por ser muy complicado y entrar materia que no hab칤amos dado.</p>
<p>Cada persona ten칤a un examen, por lo que hubo muchas versiones de este examen. De una bater칤a de preguntas del profesor (sal칤a de forma aleatoria); por lo que no hay un 칰nico examen, sino muchos. Esta es la primera versi칩n subida.</p>
<p>Cada respuesta correcta suma 1 punto, y cada respuesta incorrecta resta 0.33 puntos. Las preguntas no respondidas no suman ni restan. La puntuaci칩n total es sobre 18.</p>
<hr>
<ol>
<li>
<p>Dado el siguiente fragmento de programa en ensamblador:
<br><code>xor %rbx,%rbx<br>xor %rcx,%rcx<br>sub $56,%rcx<br>mov $0x1,%ebx<br>rcr %cl,%rbx</code><br>
쮺u치l es el valor del registro <code>RBX</code> al finalizar la 칰ltima instrucci칩n?</p>
<ul class="radio-list">
<li><label><input type="radio" data-question="1" data-content="0" /> <code>0xFF</code></label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>0xFFFFFFFFFFFFFFFF</code></label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>0x0</code></label></li>
<li><label><input type="radio" data-question="0" data-content="1" /> <code>0x0300000000000000</code></label></li>
</ul>
</li>
<li>
<p>Dado el siguiente fragmento de programa en ensamblador:
<br><code>xor %rbx,%rbx<br>xor %rax,%rax<br>sub $1, %rax<br>rcr $4,%rbx</code><br>
쮺u치l es el valor del registro <code>RBX</code> al finalizar la 칰ltima instrucci칩n?</p>
<ul class="radio-list">
<li><label><input type="radio" data-question="1" data-content="0" /> <code>0x0</code></label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>0x4</code></label></li>
<li><label><input type="radio" data-question="0" data-content="1" /> <code>0x1000000000000000</code></label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>0x40000000</code></label></li>
</ul>
</li>
<li>
<p>Dado el siguiente fragmento de programa en ensamblador:
<br><code>mov $-18,%eax<br>sar $0x46,%eax<br>and $0xFF,%eax</code><br>
쮺u치l es el valor del registro <code>RAX</code> al finalizar la 칰ltima instrucci칩n?</p>
<ul class="radio-list">
<li><label><input type="radio" data-question="1" data-content="0" /> <code>0x0</code></label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>0xFFFFFFFF</code></label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> Todo el resto de respuestas es incorrecto</label></li>
<li><label><input type="radio" data-question="0" data-content="1" /> <code>0xFF</code></label></li>
</ul>
</li>
<li>
<p>Dado el siguiente fragmento de programa en ensamblador:
<br><code>mov $-18,%eax<br>sar $0x46,%eax<br>and $0xFF000000,%eax</code><br>
쮺u치l es el valor del registro <code>RAX</code> al finalizar la 칰ltima instrucci칩n?</p>
<ul class="radio-list">
<li><label><input type="radio" data-question="0" data-content="1" /> <code>0xFF000000</code></label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>0x00</code></label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>0xFF</code></label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> Todo el resto de respuestas son incorrectas.</label></li>
</ul>
</li>
<li>
<p>Dado el siguiente fragmento de programa en ensamblador:
<br><code>mov $-14,%eax<br>sar $3,%eax<br>and $0xFF,%eax</code><br>
쮺u치l es el valor del registro <code>RAX</code> al finalizar la 칰ltima instrucci칩n?</p>
<ul class="radio-list">
<li><label><input type="radio" data-question="1" data-content="0" /> <code>0xFFFFFFFF</code></label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>0x00</code></label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>0xFF</code></label></li>
<li><label><input type="radio" data-question="0" data-content="1" /> <code>0xFE</code></label></li>
</ul>
</li>
<li>
<p>Dado el siguiente fragmento de programa en ensamblador:
<br><code>xor %rcx,%rcx<br>add $7,%rcx<br>mov $0x1234,%ebx<br>rcr %cl,%rbx</code><br>
쮺u치l es el valor del registro <code>RBX</code> al finalizar la 칰ltima instrucci칩n?</p>
<ul class="radio-list">
<li><label><input type="radio" data-question="0" data-content="1" /> <code>0xd000000000000024</code></label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>0x24</code></label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>0x0</code></label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>0x00000001234</code></label></li>
</ul>
</li>
<li>
<p>쮺u치l de las siguientes parejas de nemot칠cnicos de ensamblador corresponden a la misma instrucci칩n m치quina?</p>
<ul class="radio-list">
<li><label><input type="radio" data-question="1" data-content="0" /> <code>JC</code> (saltar si acarreo), <code>JL</code> (saltar si menor, para  n칰meros con signo).</label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>CMP</code> (comparar), <code>SUB</code> (restar).</label></li>
<li><label><input type="radio" data-question="0" data-content="1" /> <code>JZ</code> (saltar si cero), <code>JE</code> (saltar si igual).</label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>SAR</code> (desplazamiento aritm칠tico a la derecha) / <code>SHR</code> (desplazamiento l칩gico a la derecha).</label></li>
</ul>
</li>
<li>
<p>Suponga la siguiente sentencia asm en un programa:
<br><code>asm(" add (%[a],%[i],4),%[r]"<br>:[r] "+r" (result)<br>:[i] "r" (i),<br>[a] "r" (array)<br>);</code><br>
쮺u치l de las siguientes afirmaciones es incorrecta?</p>
<ul class="radio-list">
<li><label><input type="radio" data-question="1" data-content="0" /> Se desea que el valor calculado por la instrucci칩n ensamblador quede almacenado en la variable <code>result</code>.</label></li>
<li><label><input type="radio" data-question="0" data-content="1" /> <code>i</code> es un registro de salida.</label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>a</code> es un registro de entrada.</label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>r</code> es un registro de entrada/salida.</label></li>
</ul>
</li>
<li>
<p>쮺u치l de las siguientes funciones en C NO puede traducirse al siguiente c칩digo en ensamblador?
<br><code>movslq %esi,%rsi<br>movq (%rdi,%rsi,8), %rax<br>ret</code><br></p>
<ul class="radio-list">
<li><label><input type="radio" data-question="1" data-content="0" /> <code>unsigned long elem (unsigned long v[], int i) {</code><br><code>return v[i];</code><br><code>}</code></label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>unsigned *elem (unsigned *v[], int i) {</code><br><code>return v[i];</code><br><code>}</code></label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>unsigned long *elem (unsigned long *v[], int i) {</code><br><code>return v[i];</code><br><code>}</code></label></li>
<li><label><input type="radio" data-question="0" data-content="1" /> <code>unsigned long elem (unsigned long v[], int *i) {</code><br><code>return v[*i];</code><br><code>}</code></label></li>
</ul>
</li>
<li>
<p>Dado el c칩digo de una funci칩n
<br><code>funcion: movq %rdi, %rax<br>movl $64, %ecx<br>shrq %cl, %rax<br>addq %rdi, %rax<br>ret</code><br>
este c칩digo:</p>
<ul class="radio-list">
<li><label><input type="radio" data-question="1" data-content="0" /> Todas las respuestas son erroneas</label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> Devuelve 0</label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> Devuelve val.</label></li>
<li><label><input type="radio" data-question="0" data-content="1" /> Devuelve val * 2</label></li>
</ul>
</li>
<li>
<p>Si en la pr치ctica "media" se programa la suma de una lista de 16 enteros de 4B para producir un resultado de 8 B, primero sin signo y luego con signo, y la lista se rellena con el valor <code>0x0400 0000</code>, 쯘n qu칠 se diferencian los resultados de ambos programas?</p>
<ul class="radio-list">
<li><label><input type="radio" data-question="1" data-content="0" /> En uno ocupa 32 bits, en otro 64 bits.</label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> En uno se interpreta como negativo, en otro como positivo.</label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> En uno los 32 bits superiores son <code>0xFFFF FFFF</code>, en el otro no.</label></li>
<li><label><input type="radio" data-question="0" data-content="1" /> No se diferencian.</label></li>
</ul>
</li>
<li>
<p>Para crear espacio en la pila para variables locales sin inicializar suele realizarse la siguiente operaci칩n:</p>
<ul class="radio-list">
<li><label><input type="radio" data-question="1" data-content="0" /> Sumar una cantidad positiva a <code>RBP</code></label></li>
<li><label><input type="radio" data-question="0" data-content="1" /> Restar una cantidad positiva a <code>RSP</code></label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> Sumar una cantidad positiva a <code>RSP</code></label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> Restar una cantidad positiva a <code>RBP</code>.</label></li>
</ul>
</li>
<li>
<p>En la secuencia de programa siguiente:
<br><code>628: e8 cd ff ff ff callq 5fa suma<br>62d: 48 83 c4 20 add $0x20,%rsp</code><br>
쯖u치l es el valor que introduce en la pila la instrucci칩n <code>callq</code>?</p>
<ul class="radio-list">
<li><label><input type="radio" data-question="1" data-content="0" /> 0x628</label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> 0xffffffcd</label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> 0x5fa</label></li>
<li><label><input type="radio" data-question="0" data-content="1" /> 0x62d</label></li>
</ul>
</li>
<li>
<p>En x86-64, una funci칩n con 10 par치metros de tipo long que devuelve el valor del 8췈 par치metro y no modifica el puntero de pila puede traducirse a ensamblador como:</p>
<ul class="radio-list">
<li><label><input type="radio" data-question="1" data-content="0" /> <code>movq %r10, %rax<br>ret</code></label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>movq %r8, %rax<br>ret</code></label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>movq 8(%rsp), %rax<br>ret</code></label></li>
<li><label><input type="radio" data-question="0" data-content="1" /> <code>movq 16(%rsp), %rax<br>ret</code></label></li>
</ul>
</li>
<li>
<p>Respecto a la inicializaci칩n de los elementos del array:
<br><code>#define SIZE (1&lt;&lt;16)<br>for (i=0; i&lt;<tmp>SIZE; i++)<br>lista[i]=i;</code><br></p>
<ul class="radio-list">
<li><label><input type="radio" data-question="1" data-content="0" /> popcount2 (bucle interno <code>while</code>) ir치 m치s lento con esta inicializaci칩n que con n칰meros aleatorios.</label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> popcount1 ir치 (bucle interno <code>for</code>) ir치 m치s r치pido con esta inicializaci칩n que con n칰meros aleatorios</label></li>
<li><label><input type="radio" data-question="0" data-content="1" /> Las tres funciones suma del programa <code>suma_09_Casm</code> ir치n igual de r치pido con esta inicializaci칩n que con n칰meros aleatorios.</label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> Cualquiera de las tres funciones suma del programa <code>suma_09_Casm</code> ir치 m치s r치pido con esta inicializaci칩n que con n칰meros aleatorios.</label></li>
</ul>
</li>
<li>
<p>La siguiente funci칩n calcula el factorial:
<br><code>fact:<br>pushq reg # preservar registro<br>movl %edi, %ebx<br>movl $1, %eax<br>testl %edi, %edi<br>je .L4<br>leal -1(%rbx), %edi<br>call fact<br>imull %ebx, %eax<br>.L4:<br>popq reg # restaurar registro<br>ret</code><br>
쮺u치l es el registro <code>&lt;reg&gt;</code> que tiene que guardarse en la pila?</p>
<ul class="radio-list">
<li><label><input type="radio" data-question="1" data-content="0" /> %rax</label></li>
<li><label><input type="radio" data-question="0" data-content="1" /> %rbx</label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> %rsp</label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> %rdi</label></li>
</ul>
</li>
<li>
<p>Al traducir la sentencia C <br><code>r-&gt;i = val;</code><br>gcc genera el c칩digo ASM:<br><code>movl %edx, 8(%rax)</code><br>Se puede deducir que:</p>
<ul class="radio-list">
<li><label><input type="radio" data-question="0" data-content="1" /> el desplazamiento de <code>i</code> en <code>*r</code> es 8</label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>r</code> es un puntero que apunta a la posici칩n de memoria 8</label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>val</code> es un entero que vale 8</label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> <code>i</code> es un entero que vale 8</label></li>
</ul>
</li>
<li>
<p>Si el registro <code>r12b</code> contiene la variable booleana <code>cond</code>, y <code>rax</code> la variable <code>valor</code>, la secuencia de instrucciones:
<br><code>testb %r12b, %r12b<br>movq $13, %rax<br>cmove $17, %rax</code><br>
realiza la operaci칩n:</p>
<ul class="radio-list">
<li><label><input type="radio" data-question="0" data-content="1" /> valor = cond ? 13 : 17;</label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> valor = 17;</label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> valor = cond ? 17 : 13;</label></li>
<li><label><input type="radio" data-question="1" data-content="0" /> valor = 13;</label></li>
</ul>
</li>
</ol>
        </div>
    </div>
    <div id="tg-msg" class="alert" role="alert" style="display: none">
        <span id="tg-correct-questions"></span> Correct! <br /><b>Rating: <span id="tg-score"></span>%</b>
    </div>
    <div class="row">
        <button id="reset-questions" class="btn btn-link">Reiniciar todo</button>
    </div>
    <script type="text/javascript">$(function () {
    $('ul.radio-list, ul.checklist, ul.textbox').each(function (i, el) {
        var questionClass = $(this).attr('class');
        $(this).parent().addClass('question-row').addClass(questionClass);
        if (questionClass == 'radio-list') {
            $(this).find('input[type="radio"]').attr('name', 'radio-question-' + i);
        }
    });

    function checkQuestion(question) {
        var self = question;

        // Single Question.
        if (self.hasClass('radio-list')) {
            if (self.find('input[type="radio"][data-content="1"]:checked').length == 1) {
                self.addClass('text-success');
                self.removeClass('text-danger'); // Eliminar la marca de respuesta incorrecta
                self.find('input[type="radio"]').attr('disabled', true);
            } else {
                self.removeClass('text-success'); // Eliminar la marca de respuesta correcta
                self.addClass('text-danger');
            }
        }
        // Textbox Question.
        if (self.hasClass('textbox')) {
            var textbox = self.find('input[type="text"]');
            var correct_text = String(textbox.data("content")).trim().split("").reverse().join("");
            if (String(textbox.val()).trim().toLowerCase() == correct_text.toLowerCase()) {
                self.addClass('text-success');
                self.removeClass('text-danger'); // Eliminar la marca de respuesta incorrecta
                self.find('input[type="text"]').attr('disabled', true);
            } else {
                self.removeClass('text-success'); // Eliminar la marca de respuesta correcta
                self.addClass('text-danger');
                textbox.parent().find("i.text-correct").html(correct_text);
            }
        }
        // Multiple selection Questions.
        if (self.hasClass('checklist')) {
            var total_corrects = self.find('input[type="checkbox"][data-content="1"]').length;
            var total_incorrects = self.find('input[type="checkbox"][data-content="0"]').length;
            var correct_selected = self.find('input[type="checkbox"][data-content="1"]:checked').length;
            var incorrect_selected = self.find('input[type="checkbox"][data-content="0"]:checked').length;
            var qc = +((correct_selected / total_corrects) - (incorrect_selected / total_incorrects)).toFixed(2);
            if (qc < 0) {
                qc = 0;
            }
            if (qc == 0) {
                self.removeClass('text-success'); // Eliminar la marca de respuesta correcta
                self.removeClass('text-warning');
                self.addClass('text-danger');
            } else if (qc > 0 && qc < 1) {
                self.removeClass('text-success'); // Eliminar la marca de respuesta correcta
                self.removeClass('text-danger'); // Eliminar la marca de respuesta incorrecta
                self.addClass('text-warning');
            } else {
                self.removeClass('text-warning'); // Eliminar la marca de respuesta parcialmente correcta
                self.removeClass('text-danger'); // Eliminar la marca de respuesta incorrecta
                self.addClass('text-success');
                self.removeClass('text-danger'); // Eliminar la marca de respuesta incorrecta
                self.find('input[type="checkbox"]').attr('disabled', true);
            }
        }
    }

    $('li.question-row input').on('change', function () {
        var question = $(this).closest('li.question-row');
        checkQuestion(question);
    });

    $('#reset-questions').on('click', function () {
        $('li.question-row').removeClass('text-success').removeClass('text-danger').removeClass('text-warning');
        $('i.text-correct').html('');
        $('li.question-row input').prop('checked', false);
        $('li.question-row input[type="text"]').val('');
        $('li.question-row input').attr('disabled', false);
    });

    
    // Funci蚤 para mezclar las preguntas
    function shuffleQuestions() {
        $('ol').each(function() {
            var ol = $(this);
            var liArr = ol.children('li');
            liArr.sort(function() {
                return (Math.round(Math.random()) - 0.5);
            }).detach().appendTo(ol);
        });
    }

    // Funci蚤 para mezclar las opciones dentro de cada pregunta
    function shuffleOptions() {
        $('ul.radio-list').each(function() {
            var ul = $(this);
            var liArr = ul.children('li');
            liArr.sort(function() {
                return (Math.round(Math.random()) - 0.5);
            }).detach().appendTo(ul);
        });
    }

    // Llamar a las funciones para mezclar las preguntas y las opciones al cargar la p敬ina
    shuffleQuestions();
    shuffleOptions();
});</script>
</div>
</body>
</html>