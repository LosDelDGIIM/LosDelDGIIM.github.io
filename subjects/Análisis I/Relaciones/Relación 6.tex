\section{Diferenciabilidad}

\begin{ejercicio}
Probar que la norma de un espacio normado \( X \neq \{0\} \) nunca es diferenciable en 0.\\

\noindent
Sea $X\neq \{0\}$, consideramos sobre $X$ una norma $\|\cdot\|$ y supongamos que existe $T\in L(X,\mathbb{R})$ de forma que $\|\cdot\|$ es diferenciable en 0 con diferencial $T$, es decir, que:
\begin{equation*}
    \lim_{x\to0}\dfrac{\|x\| - \|0\| - T(x-0)}{\|x-0\|} = 0
\end{equation*}
Pero tenemos que:
\begin{equation*}
    0 = \lim_{x\to0}\dfrac{\|x\| - \|0\| - T(x-0)}{\|x-0\|} = \lim_{x\to0}\dfrac{\|x\|-T(x)}{\|x\|} = \lim_{x\to0}\left(1-\dfrac{T(x)}{\|x\|}\right)  \Longrightarrow \lim_{x\to0}\dfrac{T(x)}{\|x\|} = 1
\end{equation*}
Fijado $u\in X$ arbitrario con $\|u\| = 1$, tomando $t\in \mathbb{R}$ podemos hacer el cambio de variable $x = tu$, ya que $x\to 0$ cuando $t\to 0$ y $x\neq 0$ para $t\neq 0$, por lo que:
\begin{equation*}
    1 = \lim_{x\to0}\dfrac{T(x)}{\|x\|} = \lim_{t\to0}\dfrac{T(tu)}{\|tu\|} 
\end{equation*}
Como tenemos que:
\begin{equation*}
    \dfrac{T(tu)}{\|tu\|} = \dfrac{tT(u)}{|t|\|u\|} = \dfrac{tT(u)}{|t|} = sgn(t)T(u) \qquad \forall t\in \mathbb{R}
\end{equation*}
Tendremos que $sgn(t)T(u) = T(u)$ cuando $t>0$ y que $sgn(t)T(u) = -T(u)$ cuando $t<0$. Como el límite anterior existía cuando $t\to 0$, ha de ser $T(u) = -T(u)$, es decir, $T(u) = 0$. Como $u$ era arbitrario, tendremos que:
\begin{equation*}
    T(v) = 0 \qquad \forall v\in \{x\in X : \|x\| = 1\}
\end{equation*}
Lo cual implica que $T(x) = 0$ para todo $x\in X$, ya que:
\begin{equation*}
    T(x) = T(tu) = tT(u) = 0
\end{equation*}
Para ciertos $t\in \mathbb{R}$ y $u \in \{v\in X : \|v\| = 1\}$. En definitiva, $T\equiv 0$. Sin embargo, entonces tendríamos que:
\begin{equation*}
    1 = \lim_{x\to0}\dfrac{T(x)}{\|x\|} = 0
\end{equation*}
Lo cual es una contradicción, por lo que no existe tal función $T$; es decir, $\|\cdot\|$ no es diferenciable en 0.
\end{ejercicio}

\begin{ejercicio}\label{ej:rel6_2}
Probar que la norma euclídea es diferenciable en todo punto de \( \mathbb{R}^N \setminus \{0\} \) y calcular su diferencial. ¿En qué puntos de \( \mathbb{R}^2 \) es diferenciable la norma de la suma?\\

\noindent
Por la definición de la norma euclídea, tenemos que:
\begin{equation*}
    \|x\|_2 = \sqrt{\langle x,x \rangle } \qquad \forall x\in \mathbb{R}^N
\end{equation*}
Por lo que una buena forma de estudiar la diferenciabilidad de $\|\cdot\|_2$ puede ser definiendo:
\Func{g}{\bb{R}^N}{\bb{R}}{x}{\langle x,x\rangle}
\Func{h}{\bb{R}^+_0}{\bb{R}}{x}{\sqrt{x}}
Con lo que tenemos que $g(x) \in \mathbb{R}^+_0$ $\forall x\in \mathbb{R}^N$ y $\|\cdot\|_2 = h\circ g$.
\begin{description}
    \item [Diferenciabilidad de $h$.] Sabemos de Cálculo II que $h$ es derivable en $\mathbb{R}^+$, con:
        \begin{equation*}
            h'(x) = \dfrac{1}{2\sqrt{x}} \qquad \forall x\in \mathbb{R}^+
        \end{equation*}
        Por lo que $h$ es diferenciable en $\mathbb{R}^+$, teniendo para todo $a\in \mathbb{R}^+$ $Dh(a):\mathbb{R}\to \mathbb{R}$ dada por:
        \begin{equation*}
            Dh(a)(k) = \dfrac{k}{2\sqrt{a}} \qquad \forall k\in \mathbb{R}
        \end{equation*}
    \item [Diferenciabilidad de $g$.] Fijados $a,h\in \mathbb{R}^N$, observemos que:
        \begin{align*}
            g(a) &= \langle a,a \rangle  \\
            g(a+h) &= \langle a+h,a+h \rangle  = \langle a,a \rangle  + 2\langle a,h \rangle + \langle h,h \rangle 
        \end{align*}
        Por lo que tenemos $g(a+h)-g(a) = 2\langle a,h \rangle +\langle h,h \rangle $. Es fácil pensar que tomando $T(h) = 2\langle a,h \rangle $ para todo $h\in \mathbb{R}^N$ obtenemos:
        \begin{equation*}
            \lim_{h\to0}\dfrac{g(a+h)-g(a)-T(h)}{\|h\|_2} = \lim_{h\to0}\dfrac{\langle h,h \rangle }{\sqrt{\langle h,h \rangle }} = \lim_{h\to0}\sqrt{\langle h,h \rangle } = \lim_{h\to0}\|h\|_2 = 0
        \end{equation*}
        Donde en la última igualdad hemos usado que $\|\cdot\|_2$ es continua en $0$. En definitiva, tenemos que $g$ es diferenciable en $a$, $\forall a\in \mathbb{R}^N$, con $Dg(a):\mathbb{R}^N\to \mathbb{R}$ dada por:
        \begin{equation*}
            Dg(a)(k) = 2\langle a,k \rangle  \qquad \forall k\in \mathbb{R}^N
        \end{equation*}
\end{description}
En definitiva, tenemos que $g$ es diferenciable en $\mathbb{R}^N\setminus \{0\}$, y que $h$ es diferenciable en $g(\mathbb{R}^N\setminus \{0\}) = \mathbb{R}^+$. Por la regla de la cadena, tenemos que $\|\cdot\|_2 = h\circ g$ es diferenciable en $\mathbb{R}^N\setminus\{0\}$, con:
\begin{equation*}
    D\|\cdot\|_2(a) = Dh(g(a)) \circ Dg(a) \qquad \forall a\in \mathbb{R}^N\setminus\{0\}
\end{equation*}
Por lo que:
\begin{align*}
    D\|\cdot\|_2(a)(k) &= \left(Dh(g(a)) \circ Dg(a)\right)(k) = Dh(g(a))\left(Dg(a)(k)\right) = Dh(g(a))(2\langle a,k \rangle ) \\
    &= \dfrac{2\langle a,k \rangle }{2\sqrt{g(a)}} = \dfrac{\langle a,k \rangle }{\sqrt{\langle a,a \rangle }} = \dfrac{\langle a,k \rangle }{\|a\|_2} = \left\langle \dfrac{a}{\|a\|_2},k \right\rangle \qquad \forall k\in \mathbb{R}^N
\end{align*}~\\

\noindent
Si pensamos ahora en la norma de la suma en $\mathbb{R}^2$:
\begin{equation*}
    \|(x,y)\|_1 = |\pi_1(x,y)| + |\pi_2(x,y)| = |x| + |y| \qquad \forall (x,y)\in \mathbb{R}^2
\end{equation*}
No lo detallaremos tanto como el apartado anterior, pero está claro que si $x\neq 0$ y $y \neq 0$ entonces $\|\cdot\|_1$ es diferenciable en $(x,y)$. Por otro lado, tendremos que si $x = 0$ o $y = 0$, entonces $\|\cdot\|_1$ no será diferenciable en $(x,y)$. En definitiva, $\|\cdot\|_1$ es diferenciable en $\mathbb{R}^2 \setminus \{(x,y) \in \mathbb{R}^2 : xy = 0\}$.
\end{ejercicio}

\begin{ejercicio}
Probar que, tanto la diferenciabilidad de una función, como su diferencial, se conservan por traslaciones. Más concretamente, sean \( X, Y \) espacios normados, \( \Omega \) un abierto no vacío de \( X \) y \( f : \Omega \rightarrow Y \) diferenciable en un punto \( a \in \Omega \). Fijados \( x_0 \in X \) y \( y_0 \in Y \), se define \( \hat{\Omega} = \{x \in X\mid x + x_0 \in \Omega\} \) y la función \( \hat{f} : \hat{\Omega} \rightarrow Y \) dada por
\[
\hat{f}(x) = f(x + x_0) + y_0 \quad \forall x \in \hat{\Omega}
\]
Probar que \( \hat{f} \) es diferenciable en \( a - x_0 \) con \( D\hat{f}(a - x_0) = Df(a) \).\\

\noindent
En primer lugar, como $a-x_0+x_0 = a\in \Omega$, tenemos que $a-x_0 \in \hat{\Omega}$. Como $f$ es diferenciable en $a$, tenemos que:
\begin{equation*}
    \lim_{z\to a} \dfrac{f(z)-f(a)-Df(a)(z-a)}{\|z-a\|} = 0
\end{equation*}
Tomando $z = x+x_0$, como $z\to a$ cuando $x\to a-x_0$ y además $z\neq a$ cuando $x\neq a-x_0$, podemos realizar dicho cambio de variable, obteniendo que:
\begin{equation*}
    \lim_{x\to a-x_0} \dfrac{f(x+x_0)-f(a)-Df(a)(x+x_0-a)}{\|x+x_0-a\|} = 0
\end{equation*}
Sin embargo, podemos escribir:
\begin{align*}
    0 &= \lim_{x\to a-x_0} \dfrac{f(x+x_0)-f(a)-Df(a)(x+x_0-a)}{\|x+x_0-a\|}  \\
      &= \lim_{x\to a-x_0}\dfrac{f(x+x_0)+y_0 - f(a)-y_0 - Df(a)(x-(a-x_0))}{\|x-(a-x_0)\|}  \\
      &= \lim_{x\to a-x_0}\dfrac{\hat{f}(x) - \hat{f}(a-x_0) - Df(a)(x-(a-x_0))}{\|x-(a-x_0)\|} 
\end{align*}
Lo que claramente significa que $\hat{f}$ es diferenciable en $a-x_0$, con:
\begin{equation*}
    D\hat{f}(a-x_0) = Df(a)
\end{equation*}
\end{ejercicio}

\begin{ejercicio}
Sea \( \Omega \) un abierto no vacío de un espacio normado \( X \) y \( f : \Omega \rightarrow \mathbb{R} \) diferenciable en un punto \( a \in \Omega \). Sea \( J \) un intervalo abierto tal que \( f(\Omega) \subseteq J \) y \( g : J \rightarrow \mathbb{R} \) una función derivable en el punto \( b = f(a) \). Probar que \( g \circ f \) es diferenciable en \( a \), ¿Cuál es la relación entre \( D(g \circ f)(a) \) y \( Df(a) \)?\\

\noindent
Como $g$ es derivable en $b$, entonces es diferenciable en $b$, con:
\begin{equation*}
    Dg(b)(h) = g'(b)h \qquad \forall h\in \mathbb{R}
\end{equation*}
Por la regla de la cadena, como $f$ es diferenciable en $a$ y $g$ es diferenciable en $b = f(a)$, tenemos que $g\circ f$ es diferenciable en $a$, con:
\begin{equation*}
    D(g\circ f)(a) = Dg(b)\circ Df(a)
\end{equation*}
Por lo que:
\begin{equation*}
    D(g\circ f)(a)(h) = Dg(b)(Df(a)(h)) = g'(b)\cdot Df(a)(h) = g'(f(a)) \cdot Df(a)(h) \quad \forall h\in \mathbb{R}
\end{equation*}
\end{ejercicio}

\begin{ejercicio}
Dar un ejemplo de una función \( f \in D(\mathbb{R}^N) \) tal que \( f \) no es de clase \( C^1(\mathbb{R}^N) \).\\

\noindent
Sea $f:\mathbb{R}^N\to \mathbb{R}$ dada por:
\begin{equation*}
    f(x_1,x_2,\ldots,x_N) = \left\{\begin{array}{ll}
            x_1^2 \cdot \sen\left(\dfrac{1}{x_1}\right) & \text{si\ } x_1 \neq 0 \\
                                                  &\\
            0 & \text{si\ } x_1 = 0
    \end{array}\right.
\end{equation*}
Si denotamos:
\begin{equation*}
    \Omega = \{(x_1,x_2,\ldots,x_N)\in \mathbb{R}^N : x_1 \neq 0\}
\end{equation*}
Tenemos que $\Omega = \pi_1^{-1}(\mathbb{R}^\ast)$, por lo que $\Omega$ es abierto. Es claro que $f\big|_\Omega$ es continua, por lo que $f$ es continua en $\Omega$. Sea ahora $x\in \mathbb{R}^N\setminus \Omega$ y $\{x_n\} \to x$:
\begin{itemize}
    \item Si para cierto $n\in \mathbb{N}$ tenemos $x_n(1) = 0$, entonces $f(x_n) = 0 \leq x_n(1) = 0$.
    \item Si para cierto $n\in \mathbb{N}$ tenemos $x_n(1) \neq 0$, entonces:
        \begin{equation*}
            0 \leq |f(x_n)| = \left|{(x_n(1))}^{2}\cdot \sen\left(\dfrac{1}{x_n(1)}\right)\right| \leq |{(x_n(1))}^{2}|
        \end{equation*}
\end{itemize}
    En cualquier caso, tenemos que $0 \leq |f(x_n)| \leq |{(x_n(1))}^{2}|$ para todo $n\in \mathbb{N}$ y como $\{x_n\} \to x$, tenemos que $\{x_n(1)\} \to x(1) = 0$, por lo que también $\left\{{(x_n(1))}^{2}\right\}\to 0$, de donde $\{f(x_n)\} \to 0 = f(x)$. Luego $f$ es continua en $x$; por lo que $f$ es continua.\\

    \noindent
    Además, $f$ es diferenciable en $\Omega$, ya que si consideramos:
    \Func{g}{\bb{R}^\ast}{\bb{R}}{x}{x^2\cdot\sen\left(\dfrac{1}{x}\right)}
    \Func{p}{\Omega}{\bb{R}}{x}{x(1)}
    Tenemos que $p(\Omega) \subset \mathbb{R}^\ast$ por definición de $\Omega$ y $f\big|_\Omega = g\circ p$, ambas diferenciables, luego $f\big|_\Omega$ es diferenciable, y como $\Omega$ es abierto, $f$ es diferenciable en $\Omega$. Por otra parte, si $a\in \mathbb{R}^N\setminus\Omega$, tenemos que:
    \begin{gather*}
        \dfrac{f(a+h)-f(a)}{\|h\|} \leq \dfrac{{(h(1))}^{2}}{|h(1)|} = |h(1)| \qquad \forall h\in \Omega \\
        \dfrac{f(a+h)-f(a)}{\|h\|} = \dfrac{0}{\|h\|} = 0 \qquad \forall h\in \left(\mathbb{R}^N\setminus \Omega\right)\setminus\{0\}
    \end{gather*}
    Por lo que:
    \begin{equation*}
        \dfrac{f(a+h)-f(a)}{\|h\|} \leq |h(1)| \qquad \forall h\in \mathbb{R}^N\setminus\{0\}
    \end{equation*}
    De donde se deduce fácilmente que:
    \begin{equation*}
        \lim_{h\to0}\dfrac{f(a+h)-f(a)}{\|h\|} = 0
    \end{equation*}
    Lo que significa que $f$ es derivable en $a$, con $Df(a) \equiv 0$. En conclusión, $f\in D(\mathbb{R}^N)$.\\

    \noindent
    Lo que hacemos ahora es considerar la aplicación $Df:\mathbb{R}^N\to L(\mathbb{R}^N,\mathbb{R})$, donde consideramos en este último espacio la norma:
    \begin{equation*}
        \|T\| = \max \{\|T(x)\| : \|x\| = 1\}
    \end{equation*}
    Veamos que $Df$ no es continua en $0$, es decir, que existe una sucesión $\{a_n\}$ convergente a $0$ de elementos de $\mathbb{R}^N$ de forma que $\{Df(a_n)\}$ no converge a la función constantemente igual a $0$. Para ello, tomamos $v = e_1$ y consideramos:
    \begin{equation*}
        a_n = \left(\dfrac{1}{n\pi}, 0, \ldots, 0\right) \qquad \forall n\in \mathbb{N}
    \end{equation*}
    En dicho caso, tenemos que:
    \begin{equation*}
        Df(a_n)(v) = \lim_{t\to0}\dfrac{f(a_n+tv)-f(a_n)}{t} = \lim_{t\to0}  \dfrac{{(\frac{1}{n\pi}+t)}^{2}\sen\left(\dfrac{1}{\frac{1}{n\pi}+t}\right)}{t}  
    \end{equation*}
    Y si recordamos la función:
    \begin{equation*}
        g(x) = x^2\cdot \sen\left(\dfrac{1}{x}\right)\qquad \forall x\in \mathbb{R}^\ast
    \end{equation*}
    con derivada:
    \begin{equation*}
        g'(x) = 2x\sen\left(\dfrac{1}{x}\right) - \cos\left(\dfrac{1}{x}\right) \qquad \forall x\in \mathbb{R}^\ast
    \end{equation*}
    Y definimos $x_n = \frac{1}{n\pi}$ $\forall n\in \mathbb{N}$, tenemos que:
    \begin{align*}
        Df(a_n)(v) &= \lim_{t\to0}  \dfrac{{(\frac{1}{n\pi}+t)}^{2}\sen\left(\dfrac{1}{\frac{1}{n\pi}+t}\right)}{t}   = \lim_{t\to0}\dfrac{g(x_n+t)-g(x_n)}{t} \\ &= g'(x_n) = -\cos(n\pi) = {(-1)}^{n+1} \qquad \forall n\in \mathbb{N}
    \end{align*}
    Por lo que $\{Df(a_n)\}$ no converge a cero, por tanto, $Df$ no es continua en $0$.
\end{ejercicio}
