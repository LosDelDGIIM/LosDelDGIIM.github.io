\chapter{Espacios $L^p(\Omega)$} % // TODO: Leer bien del Brezis
\noindent
Recordemos\footnote{Se vio ya en Análisis Matemático II y se recordó en la Sección~\ref{sec:Lp}.} que para $1\leq p < \infty$ definíamos para un conjunto medible $\Omega\subset \mathbb{R}^N$:
\begin{equation*}
    L^p(\Omega) = \left\{[f] \text{\ con\ } f:\Omega\to \mathbb{R} \text{\ medible tal que\ } \int_\Omega |f|^p~dx < \infty\right\}
\end{equation*}

donde las clases de equivalencia vienen dadas por:
\begin{equation*}
    f\sim g \quad \Longleftrightarrow \quad f = g \text{\ casi por doquier en\ } \Omega
\end{equation*}
De esta forma, al considerar:
\begin{equation*}
    \cc{L}^p(\Omega) = \left\{f:\Omega\to \mathbb{R} \text{\ con\ } f \text{\ medible tal que\ } \int_\Omega |f|^p~dx\right\}
\end{equation*}

tenemos que:
\begin{equation*}
    L^p(\Omega) = \frac{\cc{L}^p(\Omega)}{\sim}
\end{equation*}

\begin{notacion}
    Normalmente realizaremos un abuso de notación, denotando simplemente por $f$ a $[f]$.
\end{notacion}

\noindent
Y teníamos que $L^p(\Omega)$ era un espacio normado, con la norma:
\begin{equation*}
    \|[f]\|_p = {\left(\int_\Omega|f|^p~dx\right)}^{\nicefrac{1}{p}}
\end{equation*}
Y el Teorema de Riesz-Fischer nos dice que es de Banach, y tenía como Corolario:

\begin{coro}\label{coro:corolp}
    Si $\{f_n\}$ es convergente en $L^p(\Omega)$ hacia $f\in L^p(\Omega)$, entonces existe una parcial de forma que $\{f_{\sigma(n)}\}\to f$ casi por doquier en $\Omega$. Además, existe $h\in L^p(\Omega)$ tal que:
    \begin{equation*}
        |f_{\sigma(n)}(x)| \leq h(x) \qquad \text{casi para todo\ } x\in \Omega
    \end{equation*}
\end{coro}

Y el Teorema de Riesz-Fischer usaba en gran medida:
\begin{teo}[convergencia dominada] % // TODO: Escribirlo bien a partir de Paya
    Si $\{f_n\}$ es una sucesión de funciones medibles con $\{f_n(x)\}\to f(x)$ para casi todo $x\in \Omega$ y existe $h\in L^1(\Omega)$ de forma que:
    \begin{equation*}
        |f_n(x)| \leq h(x) \qquad \text{para casi todo\ } x\in \Omega
    \end{equation*}
    Entonces:
    \begin{equation*}
        \left\{\int_\Omega f_n~dx\right\} \to \int_\Omega f~dx
    \end{equation*}
    Si supiésemos además que $f\in L^1(\Omega)$ entonces obtenemos que:
    \begin{equation*}
        \left\{\int_\Omega |f_n-f|~dx\right\} \to 0
    \end{equation*}
\end{teo}

\begin{ejercicio}
    Si tenemos $\{f_n\}$ una sucesión de funciones medibles con $\{f_n(x)\}\to f(x)$ para casi todo $x\in \Omega$ con $f\in L^p(\Omega)$ y existe $h\in L^p(\Omega)$ tal que:
    \begin{equation*}
        |f_n(x)| \leq h(x) \qquad \text{para casi todo\ } x\in \Omega
    \end{equation*}
    Entonces:
    \begin{equation*}
        \left\{\int_\Omega |f_n-f|^p~dx\right\} \to 0
    \end{equation*}
\end{ejercicio}

\noindent
Y observamos que el Corolario~\ref{coro:corolp} es casi el recíproco de este último ejercicio.

\begin{notacion}
    Usaremos ``a.e.'' (\textit{almost everywhere}) para escribir ``c.p.d'' (casi por doquier).
\end{notacion}

\subsubsection{Si $p=\infty$}
Definimos entonces:
\begin{equation*}
    L^\infty(\Omega) = \{[f] \text{\ con\ } f:\Omega\to \mathbb{R} \text{\ medible y acotada\ }\}
\end{equation*}
que es un espacio normado, con la norma:
\begin{equation*}
    \|[f]\|_\infty = \inf \left\{k\geq 0 : |f(x)|\leq k \quad \text{para casi todo\ } x\in \Omega\right\}
\end{equation*}

\begin{ejemplo}
    Si tomamos $\Omega = \left]0,1\right[$ y tomamos $f:\Omega\to \mathbb{R}$ la función $f(x) = 1$ $\forall x\in \Omega$, tenemos que:
    \begin{align*}
        &\inf\{k\geq 0 : |f(x)|\leq k \quad \text{para casi todo\ } x\in \Omega\} \AstIg \\
        &\inf\{k\geq 0 : |f(x)| \leq k \quad \forall x\in \left]0,1\right[\} = \\
        &\sup_{x\in \left]0,1\right[}|f(x)| = \|f\|_\infty
    \end{align*}
    donde en $(\ast)$ usamos que $f$ es continua. Tenemos entonces que $\|f\|_\infty = 1$. Si consideramos ahora:
    \begin{equation*}
        f(x) = \left\{\begin{array}{ll}
            1 & \text{si\ } x\in \Omega\setminus \{\nicefrac{1}{2}\} \\
             2 & \text{si\ } x = \nicefrac{1}{2}
        \end{array}\right. 
    \end{equation*}
    Tenemos entonces que:
    \begin{gather*}
        \inf \{k\geq 0 : |f(x)|=1 \leq k \quad \text{casi para todo\ } x\in \Omega\} = 1 \\
        \inf \{k\geq 0 : |f(x)|\leq k \quad \forall x\in \left]0,1\right[\} = 2
    \end{gather*}
    Al primero se le suele denotar normalmente por:
    \begin{equation*}
        \text{esssup}_{x\in \left]0,1\right[}|f(x)|
    \end{equation*}
\end{ejemplo}

\noindent
Se verifica que $(L^\infty(\Omega),\|\cdot \|_\infty)$ es un espacio de Banach.\\

\noindent
Todos estos espacios verifican: % // TODO: Tener en cuenta que no es discreto
\begin{equation*}
    L^1(\Omega) \supset \ldots \supset L^p(\Omega) \supset \ldots \supset L^\infty(\Omega)
\end{equation*}
La desigualdad de Hölder nos da para $p_2<p_1$:
\begin{equation*}
    \|f\|_{p_2}^{p_2} = \int_\Omega |f|^{p_2}~dx \leq {\left(\int_\Omega {(|f|^{p_2})}^{\nicefrac{p_1}{p_2}}~dx\right)}^{\nicefrac{p_2}{p_1}} {(|\Omega|)}^{1-\nicefrac{p_2}{p_1}} = \|f\|_{p_1}^{p_2}|\Omega|^{1-\nicefrac{p_2}{p_1}}
\end{equation*}
de donde:
\begin{equation*}
    \|f\|_{p_2} \leq \|f\|_{p_1} |\Omega|^{\nicefrac{1}{p_2}-\nicefrac{1}{p_1}}
\end{equation*}
En particular tenemos la inclusión de forma continua, por esta última igualdad. Finalmente, es trivial que si $f\in L^\infty(\Omega)$ entonces $|f|^p\in L^\infty(\Omega)$, por lo que esta última función será integrable, de donde $f\in L^p(\Omega)$. De esta forma:
\begin{equation*}
    \|f\|_p \leq \|f\|_\infty \cdot |\Omega|^{\nicefrac{1}{p}} \qquad \forall f\in L^\infty(\Omega)
\end{equation*}
Por lo que la aplicación
\Func{}{L^\infty(\Omega)}{L^p(\Omega)}{f}{f}
es continua.\\

\noindent
A partir de estas inclusiones:
\begin{equation*}
    L^\infty(\Omega) \subset \bigcap_{1\leq p < \infty}L^p(\Omega)
\end{equation*}
\begin{ejercicio}
    Pensar si se da la igualdad. En el caso que se dé, consideramos $\|\cdot \|_p$ con $p\to \infty$ y nos preguntamos si es igual a $\|\cdot \|_\infty$. De la desigualdad:
    \begin{equation*}
        \|f\|_p \leq \|f\|_\infty \cdot {|\Omega|}^{\nicefrac{1}{p}}
    \end{equation*}
    se deduce que $\|f\|$ limite $\leq \|f\|$
\end{ejercicio}


% // TODO: No se que es esto, derivada debil
\begin{ejercicio}
    Si tenemos $u\in C^1(a,b)$ y $v\in C^0(a,b)$ de forma que:
    \begin{equation*}
        \int_{a}^{b} u\varphi '~dx  = -\int_{a}^{b} v\varphi~dx  \qquad \forall \varphi \in C^1_c(a,b)
    \end{equation*}
    (donde $C_c^1$ son las de clase 1 y soporte compacto). Entonces:
    \begin{equation*}
        \int_{a}^{b} [u'(x) -v(x)]\varphi(x)~dx  = 0 \qquad \forall \varphi \in C^1_c(a,b)
    \end{equation*}
    Si en cierto punto $x_0$ tenemos $u'(x_0)-v(x_0)\neq 0$ entonces tenemos un intervalo donde es distinto de cero, y podemos encontrar $\varphi$ conveniente para que la integral no salga cero, llegando a contradicción. De aquí, $u' = v$.

    \noindent
    Definiremos la derivada débil de $u$ (integrable en el soporte de $\varphi$) como la $v$ que cumple:
    \begin{equation*}
        \int_{a}^{b} u\varphi '~dx  = -\int_{a}^{b} v\varphi~dx 
    \end{equation*}
    Por tanto, solo hace falta que $u$ sea integrable en compactos contenidos en $a,b$.
\end{ejercicio}

\begin{definicion}
    \begin{equation*}
        L^1_{\text{loc}}(\Omega) = \{u:\Omega\to \mathbb{R} \text{\ medibles con\ } u\big|_K \text{\ integrables\ } \forall K\subset \Omega \text{\ compacto}\}
    \end{equation*}
\end{definicion}

\noindent
Tenemos entonces que $u$ es derivable si y solo si existe $v\in L^1_{\text{loc}}(\Omega)$ tal que:
\begin{equation*}
    \int_\Omega u\varphi ' ~dx = -\int_\Omega v\varphi~dx \qquad \forall \varphi \in C^1_c(\Omega)
\end{equation*}
\begin{ejercicio}
    Con esta definición tenemos que $|\cdot |:\left]-1,1\right[\to \left]-1,1\right[$ es derivable.\\

    \noindent
    Sean $f\in L^1_{\text{loc}}(a,b)$ y $g\in L^1_{\text{loc}}(a,b)$ $g$ es derivada de $f$ si:
    \begin{equation*}
        \int_{a}^{b} f(x)\varphi'(x)~dx  = -\int_{a}^{b} g(x)\varphi(x)~dx  \qquad \forall \varphi \in C^1_c(a,b)
    \end{equation*}
    Si tomamos $f(x) = |x|$ para $x\in \left]-1,1\right[$, y $g(x) = sgn(x)$ para $x\in \left]-1,1\right[$ tenemos:
    \begin{align*}
        \int_{-1}^{1} |x|\varphi'(x)~dx  &= \int_{-1}^{0} -x\varphi'(x)~dx  + \int_{0}^{1} x\varphi'(x)~dx  \\
                                         &\AstIg \int_{-1}^{0} \varphi(x)~dx  - \int_{0}^{1} \varphi(x)~dx  = \int_{-1}^{1} sgn(x)\varphi(x)~dx 
    \end{align*}
    donde en $(\ast)$ hemos hecho integración por partes. 
\end{ejercicio}
Sustituimos de esta forma $C^1(\Omega)$ por $L^1_{\text{loc}}(\Omega)$, pero no por $L^1(\Omega)$.

\noindent
Para ver que una función está en $L^1_{\text{loc}}$ basta ver que tiene integral finita en un compacto pequeño en cada punto, algo que no es verdad en $L^1(\Omega)$.
